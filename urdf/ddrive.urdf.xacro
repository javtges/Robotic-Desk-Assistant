<?xml version="1.0"?>
<robot xmlns:xacro="http://wiki.ros.org/wiki/xacro" name="ddrive">

    <xacro:property name="ddrive" value="$(find homework3)/config/ddrive.yaml"/>
    <xacro:property name="ddrive" value="${load_yaml(ddrive)}"/>
    <xacro:property name="wheelW" value="${ddrive['wheelWidth']}"/>
    <xacro:property name="wheelR" value="${ddrive['wheelRadius']}"/>
    <xacro:property name="L" value="${ddrive['L']}"/>
    <xacro:property name="W" value="${ddrive['W']}"/>
    <xacro:property name="H" value="${ddrive['H']}"/>

    <xacro:property name='pi' value="3.14159"/>


    <link name="leftWheel">

        <inertial>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <mass value="1"/>
            <inertia ixx="${(L1*L1/12) + (R1*R1/4)}"  ixy="0"  ixz="0" iyy="${(L1*L1/12) + (R1*R1/4)}" iyz="0" izz="${(R1*R1/2)}" />
        </inertial>

        <visual>
            <origin xyz="${L1/2} 0 0" rpy="${pi/2} 0 ${pi/2}" />
            <geometry>
                <cylinder radius="${wheelR}" length="${wheelW}" />
            </geometry>
            <material name="blue_mat">
                <color rgba="0 0 1 1" />
            </material>
        </visual>

        <collision>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <cylinder radius="${wheelR}" length="${wheelW}" />
            </geometry>
        </collision>

    </link>

    <link name="rightWheel">

        <inertial>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <mass value="1"/>
            <inertia ixx="${(L2*L2/12) + (R2*R2/4)}"  ixy="0"  ixz="0" iyy="${(L2*L2/12) + (R2*R2/4)}" iyz="0" izz="${(R2*R2/2)}" />
        </inertial>

        <visual>
            <origin xyz="${L2/2} 0 0" rpy="${pi/2} 0 ${pi/2}" />
            <geometry>
                <cylinder radius="${wheelR}" length="${wheelW}" />
            </geometry>
            <material name="red_mat">
                <color rgba="1 0 0 1" />
            </material>
        </visual>

        <collision>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <cylinder radius="${wheelR}" length="${wheelW}" />
            </geometry>
        </collision>

    </link>


    <link name="body">

        <inertial>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <mass value="1"/>
            <inertia ixx="${(L2*L2/12) + (R2*R2/4)}"  ixy="0"  ixz="0" iyy="${(L2*L2/12) + (R2*R2/4)}" iyz="0" izz="${(R2*R2/2)}" />
        </inertial>

        <visual>
            <origin xyz="${L2/2} 0 0" rpy="${pi/2} 0 ${pi/2}" />
            <geometry>
                <box size="${L} ${W} ${H}"/>
            </geometry>
            <material name="red_mat">
                <color rgba="1 0 0 1" />
            </material>
        </visual>
x
        <collision>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <box size="${L} ${W} ${H}"/>
            </geometry>
        </collision>

    </link>




    <joint name="joint1" type="continuous">
        <parent link="base_link" />
        <child link="arm1" />
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <axis xyz="0 0 1"/>
    </joint>

    <joint name="joint2" type="continuous">
        <origin xyz="${L1} 0 0" rpy="0 0 0" />
        <parent link="arm1" />
        <child link="arm2" />
        <axis xyz="0 0 1"/>
    </joint>

    <joint name="joint3" type="fixed">
        <origin xyz="${L2} 0 0" rpy="0 0 0" />
        <parent link="arm2" />
        <child link="end_effector" />
        <axis xyz="0 0 1"/>
    </joint>

</robot>