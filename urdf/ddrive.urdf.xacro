<?xml version="1.0"?>
<robot xmlns:xacro="http://wiki.ros.org/wiki/xacro" name="twoarm">

    <xacro:property name="props_arm" value="$(find homework2)/config/arm.yaml"/>
    <xacro:property name="arm" value="${load_yaml(props_arm)}"/>
    <xacro:property name="L1" value="${arm['L1']}"/>
    <xacro:property name="L2" value="${arm['L2']}"/>
    <xacro:property name="R1" value="${arm['R1']}"/>
    <xacro:property name="R2" value="${arm['R2']}"/>
    <xacro:property name='pi' value="3.14159"/>



    <link name="base_link"/>

    <link name="arm1">

        <inertial>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <mass value="1"/>
            <inertia ixx="${(L1*L1/12) + (R1*R1/4)}"  ixy="0"  ixz="0" iyy="${(L1*L1/12) + (R1*R1/4)}" iyz="0" izz="${(R1*R1/2)}" />
        </inertial>

        <visual>
            <origin xyz="${L1/2} 0 0" rpy="${pi/2} 0 ${pi/2}" />
            <geometry>
                <cylinder radius="${R1}" length="${L1}" />
            </geometry>
            <material name="blue_mat">
                <color rgba="0 0 1 1" />
            </material>
        </visual>

        <collision>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <cylinder radius="${R1}" length="${L1}"/>
            </geometry>
        </collision>


    </link>

    <link name="arm2">

        <inertial>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <mass value="1"/>
            <inertia ixx="${(L2*L2/12) + (R2*R2/4)}"  ixy="0"  ixz="0" iyy="${(L2*L2/12) + (R2*R2/4)}" iyz="0" izz="${(R2*R2/2)}" />
        </inertial>

        <visual>
            <origin xyz="${L2/2} 0 0" rpy="${pi/2} 0 ${pi/2}" />
            <geometry>
                <cylinder radius="${R2}" length="${L2}" />
            </geometry>
            <material name="red_mat">
                <color rgba="1 0 0 1" />
            </material>
        </visual>

        <collision>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <geometry>
                <cylinder radius="${R2}" length="${L2}"/>
            </geometry>
        </collision>

    </link>


    <link name="end_effector"/>



    <joint name="joint1" type="continuous">
        <parent link="base_link" />
        <child link="arm1" />
        <origin xyz="0 0 0" rpy="0 0 0"/>
        <axis xyz="0 0 1"/>
    </joint>

    <joint name="joint2" type="continuous">
        <origin xyz="${L1} 0 0" rpy="0 0 0" />
        <parent link="arm1" />
        <child link="arm2" />
        <axis xyz="0 0 1"/>
    </joint>

    <joint name="joint3" type="fixed">
        <origin xyz="${L2} 0 0" rpy="0 0 0" />
        <parent link="arm2" />
        <child link="end_effector" />
        <axis xyz="0 0 1"/>
    </joint>

</robot>